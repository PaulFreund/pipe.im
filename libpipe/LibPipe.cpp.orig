//======================================================================================================================

#include "CommonHeader.h"
#include "LibPipe.h"

#include "ServiceRoot.h"

using namespace std;

//======================================================================================================================

std::vector<LibPipe> LibPipe::Instances;
std::vector<PipeExtensionInstance> LibPipe::Extensions;

//======================================================================================================================

<<<<<<< HEAD
LibPipe::LibPipe(tstring path, tstring serviceTypes){
	/* TODO
	map<tstring, tstring> settings { make_pair(_T("serviceTypes"), timplode(serviceTypes, _T(','))) };
	_serviceRoot = make_shared<ServiceRoot>(_T("pipe"), path, settings);
	*/
=======
LibPipe::LibPipe(tstring path, vector<tstring> serviceTypes){
	_serviceRoot = make_shared<ServiceRoot>(_T("pipe"), path, map<tstring, tstring> { make_pair(_T("serviceTypes"), timplode(serviceTypes, _T(','))) });
>>>>>>> ab95d46e279562f37a88e787b3c622bb8dbb7605
}

//----------------------------------------------------------------------------------------------------------------------

LibPipe::~LibPipe() {

}

//----------------------------------------------------------------------------------------------------------------------

void LibPipe::send(const tstring& message) {
	_serviceRoot->send(message);
}

//----------------------------------------------------------------------------------------------------------------------

tstring LibPipe::receive() {
	return _serviceRoot->receive();
}

//======================================================================================================================